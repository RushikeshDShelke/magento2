<?php
/**
 * Mage SMS - SMS notification & SMS marketing
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the BSD 3-Clause License
 * It is available through the world-wide-web at this URL:
 * http://opensource.org/licenses/BSD-3-Clause
 *
 * @category    TOPefekt
 * @package     TOPefekt_Magesms
 * @copyright   Copyright (c) 2012-2017 TOPefekt s.r.o. (http://www.mage-sms.com)
 * @license     http://opensource.org/licenses/BSD-3-Clause
 */
namespace Topefekt\Magesms\Controller\Adminhtml; use Magento\Backend\App\Action\Context; use Magento\Framework\Controller\Result\JsonFactory; use Magento\Framework\ObjectManagerInterface; use Magento\Framework\Stdlib\DateTime\TimezoneInterface; use Magento\Framework\View\Result\PageFactory; use Magento\SalesRule\Model\Rule; use Topefekt\Magesms\Helper\Data; use Topefekt\Magesms\Model\Api; use Topefekt\Magesms\Model\Marketing\Filter\Collection; use Topefekt\Magesms\Model\Marketing\FilterFactory; use Topefekt\Magesms\Model\Sms; use Topefekt\Magesms\Model\Smsprofile; use Topefekt\Magesms\Model\SmshistoryFactory; use Magento\Framework\Registry; abstract class Marketing extends \Topefekt\Magesms\Controller\Adminhtml\Action { private $v63d86ab64e85934dac763ab0688218cd77d34925 = [ \Topefekt\Magesms\Model\Marketing\Filter\Type::class, \Topefekt\Magesms\Model\Marketing\Filter\Country::class, \Topefekt\Magesms\Model\Marketing\Filter\Group::class, \Topefekt\Magesms\Model\Marketing\Filter\Gender::class, \Topefekt\Magesms\Model\Marketing\Filter\Marketing::class, \Topefekt\Magesms\Model\Marketing\Filter\Newsletter::class, \Topefekt\Magesms\Model\Marketing\Filter\Website::class, \Topefekt\Magesms\Model\Marketing\Filter\Firstname::class, \Topefekt\Magesms\Model\Marketing\Filter\Lastname::class, \Topefekt\Magesms\Model\Marketing\Filter\City::class, \Topefekt\Magesms\Model\Marketing\Filter\Register::class, \Topefekt\Magesms\Model\Marketing\Filter\Birthday::class, \Topefekt\Magesms\Model\Marketing\Filter\Birthdayall::class, \Topefekt\Magesms\Model\Marketing\Filter\Sale::class, \Topefekt\Magesms\Model\Marketing\Filter\Orderssum::class, \Topefekt\Magesms\Model\Marketing\Filter\Product::class, ]; protected $_filtersCollection; public $_collection; protected $_timezone; protected $sms; protected $_rule; protected $resultJsonFactory; protected $_filterFactory; public function __construct(Context $i31cc913adc2717e2346d503153c97449098831aa, PageFactory $i3f1db03e4dfdd28ff5ba1a1f709c3a2e135b99b1, Smsprofile $i6abff7c4dab2aa28578ae1dc49699ba6b1d18c18, Api $i451f679eaafeecb81387b150019f0d9e0fa83d16, Data $i0d09b2a4f282150bf47b02f9f3d82586fe313844, Sms $i2012325f8714e1168a6c4fd06b9fa8eee23fcc7f, Registry $ie9fe5cdc9fc7093987f4d41ad4cae3554e64e17b, Collection $id468ae02d8644db8e685d5e575dce69152b894fb, TimezoneInterface $i260d90f1814946d8c96fb0eb67a61524e84957cb, JsonFactory $i9a280ebe4bf63f298222a5d64da69db4e648d487, Rule $i66e3a0cd135d568c8d85190341325c1d3af03b4b, FilterFactory $id9301f96018679381f62bb3ea6738e1abefb4304) { parent::__construct($i31cc913adc2717e2346d503153c97449098831aa, $i3f1db03e4dfdd28ff5ba1a1f709c3a2e135b99b1, $i6abff7c4dab2aa28578ae1dc49699ba6b1d18c18, $i451f679eaafeecb81387b150019f0d9e0fa83d16, $i0d09b2a4f282150bf47b02f9f3d82586fe313844, $ie9fe5cdc9fc7093987f4d41ad4cae3554e64e17b); $this->_filtersCollection = $id468ae02d8644db8e685d5e575dce69152b894fb; $this->_timezone = $i260d90f1814946d8c96fb0eb67a61524e84957cb; $this->sms = $i2012325f8714e1168a6c4fd06b9fa8eee23fcc7f; $this->_rule = $i66e3a0cd135d568c8d85190341325c1d3af03b4b; $this->resultJsonFactory = $i9a280ebe4bf63f298222a5d64da69db4e648d487; $this->_filterFactory = $id9301f96018679381f62bb3ea6738e1abefb4304; $this->context = $i31cc913adc2717e2346d503153c97449098831aa; } protected function prepareFilters() { $this->_filtersCollection->addFilters($this->v63d86ab64e85934dac763ab0688218cd77d34925); $this->getCoreRegistry()->register('magesms_marketing_filters', $this->_filtersCollection, true); $this->_collection = $this->_getCollection(); $this->_filtersCollection->setCollection($this->_collection); $this->_filtersCollection->setFilters($this->_collection); $this->getCoreRegistry()->register('magesms_marketing_collection', $this->_collection, true); } protected function _getCollection() { $iff7e46827cbb6547116c592bf800f4687428abf9 = $this->getMageHelper()->getCustomerCollection(); return $iff7e46827cbb6547116c592bf800f4687428abf9; } public function _initAction() { parent::_initAction(); $this->_setActiveMenu('Topefekt_Magesms::magesms_marketing'); return $this; } protected function _isAllowed() { return $this->_authorization->isAllowed('Topefekt_Magesms::magesms_marketing'); } } 