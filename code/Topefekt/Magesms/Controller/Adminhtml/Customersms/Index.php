<?php
/**
 * Mage SMS - SMS notification & SMS marketing
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the BSD 3-Clause License
 * It is available through the world-wide-web at this URL:
 * http://opensource.org/licenses/BSD-3-Clause
 *
 * @category    TOPefekt
 * @package     TOPefekt_Magesms
 * @copyright   Copyright (c) 2012-2017 TOPefekt s.r.o. (http://www.mage-sms.com)
 * @license     http://opensource.org/licenses/BSD-3-Clause
 */
namespace Topefekt\Magesms\Controller\Adminhtml\Customersms; use Magento\Framework\App\RequestInterface; use Magento\Framework\Data\Collection; use Magento\Framework\DataObject; class Index extends \Topefekt\Magesms\Controller\Adminhtml\Customersms { private $v2b483c223d472d1fb22c9823dcc35f84765b2c06; public function dispatch(RequestInterface $ib2c014c384e400e98e6977efa41c20d14e2c7dea) { $i2b483c223d472d1fb22c9823dcc35f84765b2c06 = $this->getCollectionFactory()->create(); $this->v2b483c223d472d1fb22c9823dcc35f84765b2c06 = $i2b483c223d472d1fb22c9823dcc35f84765b2c06; $this->v2b483c223d472d1fb22c9823dcc35f84765b2c06->addItem(new DataObject( [ 'group' => 'order_status', 'name' => 'Order status', 'icon' => 'images/AdminOrders.gif' ] ))->addItem(new DataObject( [ 'group' => 'order', 'name' => 'Order', 'icon' => 'images/AdminOrders.gif' ] ))->addItem(new DataObject( [ 'group' => 'account', 'name' => 'Account', 'icon' => 'images/AdminCustomers.gif' ] )); return parent::dispatch($ib2c014c384e400e98e6977efa41c20d14e2c7dea); } public function execute() { $ie54fcd5470bd7f31f709089290e33bb03e655c25 = $this->getMageHelper()->getMutations(); $i7137e40370cf1c5ccf937060891613788203e2d6 = $this->getRequest()->getParam('mutation', $this->getMageHelper()->getConfig('general/locale/code')); $i4e1b8926ef4e0a9beea90ab0302b5e21eab5791a = ''; if ($i7137e40370cf1c5ccf937060891613788203e2d6 && !array_key_exists($i7137e40370cf1c5ccf937060891613788203e2d6, $ie54fcd5470bd7f31f709089290e33bb03e655c25)) $i7137e40370cf1c5ccf937060891613788203e2d6 = ''; if (isset($ie54fcd5470bd7f31f709089290e33bb03e655c25[$i7137e40370cf1c5ccf937060891613788203e2d6])) { $ie54fcd5470bd7f31f709089290e33bb03e655c25[$i7137e40370cf1c5ccf937060891613788203e2d6]['selected'] = 1; $i4e1b8926ef4e0a9beea90ab0302b5e21eab5791a = $ie54fcd5470bd7f31f709089290e33bb03e655c25[$i7137e40370cf1c5ccf937060891613788203e2d6]['label']; $this->getCoreRegistry()->register('mutation_value', $ie54fcd5470bd7f31f709089290e33bb03e655c25[$i7137e40370cf1c5ccf937060891613788203e2d6]['value']); } else { foreach ($ie54fcd5470bd7f31f709089290e33bb03e655c25 as &$i593f9fb6306ab4cdb862f1ef6769504d63647c90) { $i7137e40370cf1c5ccf937060891613788203e2d6 = $i593f9fb6306ab4cdb862f1ef6769504d63647c90['value']; $i593f9fb6306ab4cdb862f1ef6769504d63647c90['selected'] = 1; $i4e1b8926ef4e0a9beea90ab0302b5e21eab5791a = $i593f9fb6306ab4cdb862f1ef6769504d63647c90['label']; $this->getCoreRegistry()->register('mutation_value', $i593f9fb6306ab4cdb862f1ef6769504d63647c90['value']); break; } } $this->getCoreRegistry()->register('mutations', $ie54fcd5470bd7f31f709089290e33bb03e655c25); $ie8d90f6313614fbb6564426c0b0cb59a0ca4cecd = $this->getUnicodeFactory()->create()->getCollection() ->addFilter('type', 'customer')->getFirstItem(); $this->getCoreRegistry()->register('hooks_unicode', $ie8d90f6313614fbb6564426c0b0cb59a0ca4cecd); foreach ($this->v2b483c223d472d1fb22c9823dcc35f84765b2c06 as $group) { $group->setHooks($this->getHooks()->getHooks($group->getGroup(), 'customers', $i7137e40370cf1c5ccf937060891613788203e2d6)); } $this->getCoreRegistry()->register('hooks_groups', $this->v2b483c223d472d1fb22c9823dcc35f84765b2c06); $this->_initAction(); $this->_view->getPage()->getConfig()->getTitle()->prepend(__('Customer SMS - '.$i4e1b8926ef4e0a9beea90ab0302b5e21eab5791a)); $this->_view->renderLayout(); } public function _initAction() { parent::_initAction(); $this->_addBreadcrumb(__('Customer SMS'), __('Customer SMS')); return $this; } protected function _isAllowed() { return $this->_authorization->isAllowed('Topefekt_Magesms::magesms_customersms'); } } 