<?php
/**
 * Mage SMS - SMS notification & SMS marketing
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the BSD 3-Clause License
 * It is available through the world-wide-web at this URL:
 * http://opensource.org/licenses/BSD-3-Clause
 *
 * @category    TOPefekt
 * @package     TOPefekt_Magesms
 * @copyright   Copyright (c) 2012-2017 TOPefekt s.r.o. (http://www.mage-sms.com)
 * @license     http://opensource.org/licenses/BSD-3-Clause
 */
 namespace Topefekt\Magesms\Model; class Exceptions extends \Magento\Framework\Model\AbstractModel { protected $profile; protected $api; public function __construct(\Magento\Framework\Model\Context $i31cc913adc2717e2346d503153c97449098831aa, \Magento\Framework\Registry $ie9fe5cdc9fc7093987f4d41ad4cae3554e64e17b, Smsprofile $i3a81d7d700dc6d1b4279ed33db8d01cd2cae8ed9, Api $i451f679eaafeecb81387b150019f0d9e0fa83d16, \Magento\Framework\Model\ResourceModel\AbstractResource $ie1939956d7f2b426b1f98ab49f12f1d271da85c2 = null, \Magento\Framework\Data\Collection\AbstractDb $ib0dfcb3a2fe0ac5af091a318af6a161d665cc0cd = null, array $ia61712c27ea241bd7a543dc2b02ea572274d0322 = []) { $this->profile = $i3a81d7d700dc6d1b4279ed33db8d01cd2cae8ed9; $this->api = $i451f679eaafeecb81387b150019f0d9e0fa83d16; parent::__construct($i31cc913adc2717e2346d503153c97449098831aa, $ie9fe5cdc9fc7093987f4d41ad4cae3554e64e17b, $ie1939956d7f2b426b1f98ab49f12f1d271da85c2, $ib0dfcb3a2fe0ac5af091a318af6a161d665cc0cd, $ia61712c27ea241bd7a543dc2b02ea572274d0322); } protected function _construct() { $this->_init('Topefekt\Magesms\Model\ResourceModel\Exceptions'); } public function updateData() { $i04133b282add75cc6fb03b8f23059a4a19ae63c9 = $this->getCollection(); $ia61712c27ea241bd7a543dc2b02ea572274d0322 = 'action=showexc&username='.urlencode($this->profile->user->getUser()); $i55dd4e7042a1f9031b84f07f04c37165ce3d0720 = $this->api->serverPost($ia61712c27ea241bd7a543dc2b02ea572274d0322); if ($i55dd4e7042a1f9031b84f07f04c37165ce3d0720['errno'] == 1 && !empty($i55dd4e7042a1f9031b84f07f04c37165ce3d0720['data'])) { $if2363dc4f19bfec9b2f6c8c836b58e55c25e6997 = []; foreach($i04133b282add75cc6fb03b8f23059a4a19ae63c9 as $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f) $if2363dc4f19bfec9b2f6c8c836b58e55c25e6997[$i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getId()] = 1; $i91f38bff7110fc85a77a8fd1a2cbfe902aa46e9e = \Magento\Framework\App\ObjectManager::getInstance(); $ie1939956d7f2b426b1f98ab49f12f1d271da85c2 = $i91f38bff7110fc85a77a8fd1a2cbfe902aa46e9e->create(\Topefekt\Magesms\Model\ResourceModel\Exceptions::class); foreach($i55dd4e7042a1f9031b84f07f04c37165ce3d0720['data'] as $ia61712c27ea241bd7a543dc2b02ea572274d0322) { list($if0177bfe4bf22cfbb3da2ac06eca557829f0a4cd, $i5bf792bc27965e6366ed7dd55d8a4f1216ffd4bc, $i4616676bff4c07942c8542e6b4e0ccf29d473424, $i4de11663a9306b410e28ff008f89a06a42664d88) = explode(',', $ia61712c27ea241bd7a543dc2b02ea572274d0322); $i5bf407a3ecf35ff195a9c7e8f546cfc606253fad = true; foreach($i04133b282add75cc6fb03b8f23059a4a19ae63c9 as $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f) { if ($i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getPrefix() == $if0177bfe4bf22cfbb3da2ac06eca557829f0a4cd && $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getFirstPrefix() == $i5bf792bc27965e6366ed7dd55d8a4f1216ffd4bc && $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getLength() == $i4616676bff4c07942c8542e6b4e0ccf29d473424 && $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getTrim() == $i4de11663a9306b410e28ff008f89a06a42664d88) { unset($if2363dc4f19bfec9b2f6c8c836b58e55c25e6997[$i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getId()]); $i5bf407a3ecf35ff195a9c7e8f546cfc606253fad = false; break; } } if ($i5bf407a3ecf35ff195a9c7e8f546cfc606253fad === true) { $i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd = $i91f38bff7110fc85a77a8fd1a2cbfe902aa46e9e->create(\Topefekt\Magesms\Model\Exceptions::class); $i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd->setPrefix($if0177bfe4bf22cfbb3da2ac06eca557829f0a4cd); $i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd->setFirstPrefix($i5bf792bc27965e6366ed7dd55d8a4f1216ffd4bc); $i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd->setLength($i4616676bff4c07942c8542e6b4e0ccf29d473424); $i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd->setTrim($i4de11663a9306b410e28ff008f89a06a42664d88); $ie1939956d7f2b426b1f98ab49f12f1d271da85c2->save($i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd); } } $i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd = $i91f38bff7110fc85a77a8fd1a2cbfe902aa46e9e->create(\Topefekt\Magesms\Model\Exceptions::class); foreach($if2363dc4f19bfec9b2f6c8c836b58e55c25e6997 as $i7d411c0cc32cdb65ec82b9e8d79aa996946f5538=>$i3ca4aff6918962dee4a8054ca52f13ef3b6bab08) $ie1939956d7f2b426b1f98ab49f12f1d271da85c2->load($i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd, $i7d411c0cc32cdb65ec82b9e8d79aa996946f5538)->delete($i2e5aa867ea7c6f8ed9ffffe56b63b837364669dd); } } public function number($i39404799a9171a012cb8b15cd8f27b347aa44a5f, $if0177bfe4bf22cfbb3da2ac06eca557829f0a4cd) { if ($i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f = $this->_cacheManager->load('exceptions')) { $i04133b282add75cc6fb03b8f23059a4a19ae63c9 = $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f; } else { $i04133b282add75cc6fb03b8f23059a4a19ae63c9 = $this->getCollection(); $this->_cacheManager->save($this->serialize($i04133b282add75cc6fb03b8f23059a4a19ae63c9), 'exceptions'); } foreach($i04133b282add75cc6fb03b8f23059a4a19ae63c9 as $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f) { if ($i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getPrefix() == $if0177bfe4bf22cfbb3da2ac06eca557829f0a4cd && $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getLength() == strlen($i39404799a9171a012cb8b15cd8f27b347aa44a5f) && $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getFirstPrefix() == substr($i39404799a9171a012cb8b15cd8f27b347aa44a5f, 0, 2)) { return $if0177bfe4bf22cfbb3da2ac06eca557829f0a4cd.($i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getTrim() ? substr($i39404799a9171a012cb8b15cd8f27b347aa44a5f, $i3f4f633cf43d2d0313bcae3ea42defdb5a5dbf8f->getTrim()) : $i39404799a9171a012cb8b15cd8f27b347aa44a5f); } } return $i39404799a9171a012cb8b15cd8f27b347aa44a5f; } } 